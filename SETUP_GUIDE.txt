# NextGen IDS - Complete Setup Guide

## üìã What is this project?
This is an AI-powered Intrusion Detection System (IDS) that can:
- Detect network attacks (DDoS, Port Scan, Malware, Brute Force, SQL Injection)
- Analyze files (CSV, PCAP) for threats
- Check URLs and emails for phishing
- Monitor live network traffic in real-time
- Train AI models to detect new attacks

---

## üöÄ PART 1: SETUP ON NEW SYSTEM

### Step 1: Install Python
1. Download Python 3.10 or higher from: https://www.python.org/downloads/
2. During installation, CHECK the box "Add Python to PATH"
3. Click "Install Now"
4. Open Command Prompt/PowerShell and type: `python --version`
   - You should see: Python 3.10.x or higher

### Step 2: Install Npcap (For Windows - Required for Live Detection)
1. Download Npcap from: https://npcap.com/#download
2. Run the installer
3. Check these boxes:
   - ‚úì Install Npcap in WinPcap API-compatible Mode
   - ‚úì Support raw 802.11 traffic
4. Click Install

### Step 3: Extract the Project
1. Extract the ZIP file to a location like:
   - Windows: `C:\Users\YourName\Desktop\NewGenIDS-main`
   - Mac/Linux: `~/Desktop/NewGenIDS-main`
2. Open Command Prompt/PowerShell/Terminal
3. Navigate to the project folder:
   ```
   cd C:\Users\YourName\Desktop\NewGenIDS-main\NewGenIDS-main
   ```

### Step 4: Create Virtual Environment
```powershell
# Windows PowerShell
python -m venv .venv
.\.venv\Scripts\Activate.ps1

# Mac/Linux Terminal
python3 -m venv .venv
source .venv/bin/activate
```
You should see `(.venv)` at the start of your command line.

### Step 5: Install Required Packages
```
pip install -r requirements.txt
```
This will take 5-10 minutes. It installs:
- PyTorch (AI framework)
- Flask (Web dashboard)
- Scapy (Network packet capture)
- Scikit-learn, Pandas, NumPy (Data processing)
- And more...

**Troubleshooting:**
- If you get SSL errors, try: `pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org -r requirements.txt`
- If PyTorch fails, visit: https://pytorch.org/get-started/locally/ for your system

---

## üéÆ PART 2: HOW TO RUN THE DASHBOARD

### Quick Start (Easiest Way)
```powershell
# Make sure virtual environment is activated (you should see .venv)
python quick_start.py
```

Then open your web browser and go to:
```
http://localhost:8080
```

**Default Login:**
- Username: `admin`
- Password: `admin123`

OR

- Username: `demo`
- Password: `demo123`

### What You'll See:
- üìä Dashboard Tab: Live threat feed and statistics
- üîç Analysis Tab: Upload files to analyze
- üé£ Phishing Tab: Check URLs and emails
- üìù Logs Tab: Analyze system logs
- üéì Training Tab: Train the AI model

---

## üéì PART 3: TRAINING THE MODEL

### What is Training?
Training teaches the AI to recognize different types of attacks by showing it examples.

### Training Data Location
The project comes with demo data in:
```
data/iot23/demo_samples/
```

Available files:
- `ddos.csv` - DDoS attack samples
- `port_scan.csv` - Port scanning samples
- `brute_force.csv` - Brute force attack samples
- `malware_c2.csv` - Malware command & control
- `sql_injection.csv` - SQL injection attacks
- `normal.csv` - Normal traffic samples

### How to Train (3 Methods)

#### Method 1: Using Dashboard (Easiest)
1. Open dashboard: `http://localhost:8080`
2. Click "üéì Training" tab
3. Set:
   - Epochs: 10 (for quick training) or 20-30 (for better accuracy)
   - Batch Size: 64
   - Check "Use Advanced A-RNN Model"
4. Click "Start Training"
5. Wait 5-15 minutes
6. Done! The model is saved automatically

#### Method 2: Using Command Line
```powershell
# Activate virtual environment first
.\.venv\Scripts\Activate.ps1

# Train with default settings (10 epochs)
python src/train.py --dataset iot23 --epochs 10 --batch_size 64 --use-arnn

# Train with advanced settings (30 epochs, early stopping)
python src/advanced_train.py --dataset iot23 --epochs 30 --use-arnn
```

#### Method 3: Run Tests
```powershell
python src/test_suite.py
```
This will test all components including the AI models.

### Where to Find More Training Data

**Free Datasets:**

1. **CICIDS 2017** (Most Popular)
   - Link: https://www.unb.ca/cic/datasets/ids-2017.html
   - Contains: DDoS, Port Scan, Brute Force, etc.
   - Format: PCAP and CSV
   - Size: ~7GB

2. **UNSW-NB15**
   - Link: https://research.unsw.edu.au/projects/unsw-nb15-dataset
   - Contains: Modern attacks
   - Format: CSV
   - Size: ~2GB

3. **NSL-KDD** (Smaller, Good for Learning)
   - Link: https://www.unb.ca/cic/datasets/nsl.html
   - Contains: Classic attacks
   - Format: CSV
   - Size: ~10MB

4. **IoT-23** (IoT Devices)
   - Link: https://www.stratosphereips.org/datasets-iot23
   - Contains: IoT malware
   - Format: PCAP and CSV
   - Size: Varies

**How to Use Downloaded Data:**
1. Download the dataset
2. If it's PCAP format, convert to CSV:
   ```
   python src/pcap_converter.py --input downloaded_file.pcap --output converted.csv
   ```
3. Place CSV in `data/iot23/` folder
4. Train using the dashboard or command line

---

## üî¥ PART 4: LIVE DETECTION (Real-Time Monitoring)

### What is Live Detection?
It monitors your network card and analyzes ALL traffic passing through in real-time.

### How to Run Live Detection

#### Step 1: Find Your Network Interface
```powershell
# Windows
ipconfig

# Mac/Linux
ifconfig
```

Look for your active network adapter name:
- Windows: "Wi-Fi", "Ethernet", "Local Area Connection"
- Mac/Linux: "en0", "eth0", "wlan0"

#### Step 2: Start the Dashboard First
```powershell
python quick_start.py
```
Leave this running in one terminal.

#### Step 3: Start Live Detection in New Terminal
Open a NEW Command Prompt/PowerShell window:

```powershell
# Activate virtual environment
.\.venv\Scripts\Activate.ps1

# Start live detection (replace "Wi-Fi" with your interface name)
python -m src.realtime --iface "Wi-Fi" --dashboard http://localhost:8080 --window 5 --seq-len 100
```

**Parameters Explained:**
- `--iface "Wi-Fi"` = Your network card name
- `--dashboard http://localhost:8080` = Where to send alerts
- `--window 5` = Analyze every 5 seconds
- `--seq-len 100` = How many packets to analyze together

#### Step 4: View Live Threats
1. Open browser: http://localhost:8080
2. You'll see threats appear in real-time on the Dashboard tab
3. Every detected attack shows:
   - Attack type (DDoS, Port Scan, etc.)
   - Source IP address
   - Confidence percentage

### Troubleshooting Live Detection

**"No interfaces found"**
- Solution: Install Npcap (see Part 1, Step 2)

**"Permission denied"**
- Windows: Run PowerShell as Administrator
- Mac/Linux: Use `sudo python -m src.realtime ...`

**"Too many false positives"**
- This is normal! The model was trained on demo data.
- Solution: Train on YOUR network data to learn what's normal for you.

---

## üìÅ PART 5: FILE ANALYSIS

### Upload Files Through Dashboard
1. Open: http://localhost:8080
2. Click "üîç Analysis" tab
3. Click or drag-and-drop files:
   - CSV files: Network traffic logs
   - PCAP files: Packet capture files
4. Click "Analyze"
5. Results appear below showing:
   - Number of samples analyzed
   - Detected attack types
   - Count of each attack

### Supported File Formats

**CSV Format:**
Your CSV should have these columns:
- packet_rate, bytes_per_packet, entropy, unique_ports, syn_flag_ratio
- fin_flag_ratio, rst_flag_ratio, psh_flag_ratio, ack_flag_ratio
- inter_arrival_time, flow_duration, etc.

Example: See `data/iot23/demo_samples/*.csv`

**PCAP Format:**
Standard packet capture files from:
- Wireshark
- tcpdump
- Scapy
- Any network capture tool

---

## üé£ PART 6: PHISHING DETECTION

### Check Suspicious URLs
1. Open dashboard
2. Click "üé£ Phishing" tab
3. Under "URL Check", paste a URL like:
   ```
   http://paypal-secure-verify.tk/login.php
   ```
4. Click "Analyze URL"
5. See risk score (0-100) and detection result

### Check Suspicious Emails
1. Under "Email Check", paste email content
2. Optionally add sender email
3. Click "Analyze Email"
4. See risk score and indicators

---

## üìù PART 7: LOG ANALYSIS

### Analyze System Logs
1. Click "üìù Logs" tab
2. Paste your system logs (one per line):
   ```
   Failed password for admin from 192.168.1.100
   User elevated privileges to SYSTEM
   PowerShell.exe executed suspicious script
   ```
3. Click "Analyze Logs"
4. See detected security events with severity levels

---

## ‚öôÔ∏è PART 8: SETTINGS & CONFIGURATION

### Auto-Response Settings
The system can automatically block IPs, but it's in "Dry Run" mode for safety.

**To enable real blocking:**
1. Edit: `config/auto_response.json`
2. Change:
   ```json
   {
     "dry_run": false
   }
   ```
3. Save and restart dashboard

**Warning:** This will actually block IPs on your firewall!

### Change Passwords
Edit: `config/users.json`
```json
{
  "admin": "new_hashed_password_here",
  "demo": "demo_password_hash"
}
```

Or add new users through the authentication module.

---

## üîß COMMON ISSUES & SOLUTIONS

### Issue 1: "Module not found"
**Solution:**
```powershell
pip install -r requirements.txt
```

### Issue 2: Dashboard won't start
**Solution:**
1. Check if port 8080 is already in use
2. Try different port in `src/dashboard_unified.py`:
   ```python
   app.run(host='0.0.0.0', port=8081)  # Change 8080 to 8081
   ```

### Issue 3: Training takes too long
**Solution:**
- Reduce epochs: `--epochs 5`
- Reduce batch size: `--batch_size 32`
- Or just wait - it's normal to take 10-15 minutes

### Issue 4: Can't capture live traffic
**Solution:**
1. Install Npcap (Windows)
2. Run as Administrator
3. Check interface name with `ipconfig`

### Issue 5: Model accuracy is low
**Solution:**
- Train for more epochs (20-30)
- Use more training data
- Try advanced training: `python src/advanced_train.py`

---

## üìö QUICK REFERENCE

### Essential Commands
```powershell
# Activate virtual environment (Always do this first!)
.\.venv\Scripts\Activate.ps1

# Start dashboard
python quick_start.py

# Train model
python src/train.py --dataset iot23 --epochs 10 --use-arnn

# Live detection
python -m src.realtime --iface "Wi-Fi" --dashboard http://localhost:8080

# Run tests
python src/test_suite.py

# Production mode (multi-threaded)
python start_production.py
```

### Important Files
- `quick_start.py` - Easy dashboard launcher
- `src/dashboard_unified.py` - Main dashboard
- `src/train.py` - Model training
- `src/realtime.py` - Live detection
- `src/test_suite.py` - All tests
- `requirements.txt` - Required packages
- `checkpoints/best_iot23.pt` - Trained model
- `data/iot23/demo_samples/` - Demo attack files

### URLs
- Dashboard: http://localhost:8080
- Login: admin / admin123

---

## üéØ DEMO CHECKLIST (For Presentation)

‚úÖ **Before Demo:**
1. Activate virtual environment
2. Start dashboard: `python quick_start.py`
3. Open browser: http://localhost:8080
4. Login with: admin / admin123

‚úÖ **Show Features:**
1. **Dashboard** - Explain real-time monitoring
2. **File Analysis** - Upload `data/iot23/demo_samples/ddos.csv`
3. **Phishing** - Test URL: `http://paypal-verify.tk/login`
4. **Logs** - Paste: "Failed password for admin from 10.0.0.50"
5. **Training** - Start training (or show pre-trained results)
6. **Live Detection** - Run realtime.py in separate terminal

‚úÖ **Key Points to Mention:**
- Uses AI (LSTM, CNN, A-RNN) for detection
- Detects 6 types of attacks
- Real-time monitoring capability
- ML-based phishing detection
- 100% test coverage (21 tests passing)
- Production-ready with security features

---

## üìû NEED HELP?

**Check These First:**
1. Make sure virtual environment is activated (see `.venv` in prompt)
2. Make sure all packages installed: `pip list`
3. Check Python version: `python --version` (should be 3.10+)
4. Read error messages carefully - they usually tell you what's wrong

**Still Stuck?**
- Check `READY_TO_DEMO.md` for more details
- Check `PROJECT_COMPLETE_FINAL.md` for technical documentation
- Run tests: `python src/test_suite.py` to diagnose issues

---

## üéâ YOU'RE READY!

Your NextGen IDS is now set up and ready to use!

**Quick Start Reminder:**
1. Activate environment: `.\.venv\Scripts\Activate.ps1`
2. Start dashboard: `python quick_start.py`
3. Open: http://localhost:8080
4. Login: admin / admin123

**Good luck with your project! üöÄ**

---

*Last Updated: November 17, 2025*
*Version: 2.0 Complete*
